<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Zakat - Djebeng Wibowo</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --nusuk-gold: #c5a059; --nusuk-green: #0b4a3f; --nusuk-bg: #f9f7f2; --white: #ffffff; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--nusuk-bg); margin: 0; padding: 20px 0; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; overflow-x: hidden; position: relative; }
        
        .bg-animate { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; background: linear-gradient(135deg, #f9f7f2 0%, #ece5d5 100%); }
        .floating-icon { position: absolute; opacity: 0.6; animation: floatUp 15s infinite linear; filter: drop-shadow(0 0 10px rgba(197, 160, 89, 0.4)); z-index: -1; }
        @keyframes floatUp { 0% { transform: translateY(110vh) rotate(0deg); opacity: 0; } 10% { opacity: 0.6; } 90% { opacity: 0.6; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }

        /* Rampingkan kotak untuk mobile (85%) agar animasi icon di samping terlihat */
        .container { width: 85%; max-width: 500px; background: var(--white); border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.08); padding: 25px 20px; border-top: 8px solid var(--nusuk-gold); position: relative; z-index: 5; margin: 20px auto; }
        
        /* Desktop view tetap proporsional */
        @media (min-width: 600px) { .container { width: 100%; } }

        header { text-align: center; margin-bottom: 20px; }
        h1 { color: var(--nusuk-green); font-size: 1.6rem; margin: 0; font-weight: 800; letter-spacing: -0.5px; }

        .form-section { background: #fafafa; padding: 15px; border-radius: 14px; border: 1px solid #f0f0f0; margin-bottom: 12px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; color: var(--nusuk-green); font-size: 0.8rem; }
        select, input { width: 100%; padding: 12px; border: 1.5px solid #e8e8e8; border-radius: 10px; font-size: 0.9rem; box-sizing: border-box; appearance: none; background-color: white; }

        button { width: 100%; padding: 15px; background: var(--nusuk-green); color: white; border: none; border-radius: 12px; font-size: 1rem; font-weight: 700; cursor: pointer; margin-top: 5px; transition: 0.3s; box-shadow: 0 4px 15px rgba(11, 74, 63, 0.2); }
        button:hover { background: #08362e; transform: translateY(-1px); }

        .result-card { background: #fdfaf3; border: 1.5px solid #f1e6cf; border-radius: 16px; padding: 20px; margin-top: 25px; animation: fadeIn 0.5s ease; display: none; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .total-amount { font-size: 1.8rem; color: var(--nusuk-green); font-weight: 800; text-align: center; margin: 10px 0; word-wrap: break-word; }
        .nisab-warning { font-size: 0.9rem; color: #d9534f; font-weight: 700; text-align: center; margin-bottom: 10px; display: none; }
        
        .arabic { font-family: 'Amiri', serif; font-size: 1.1rem; text-align: center; direction: rtl; line-height: 1.6; margin-bottom: 12px; color: var(--nusuk-green); padding: 0 5px; }
        .translation { font-style: italic; font-size: 0.75rem; color: #555; text-align: center; margin-bottom: 8px; line-height: 1.5; }
        .source-tag { font-weight: 700; color: var(--nusuk-gold); font-size: 0.7rem; text-align: center; display: block; text-transform: uppercase; margin-bottom: 15px; }
        
        .rule-box { border-top: 1px dashed #dcc7a1; padding-top: 12px; margin-top: 5px; text-align: center; }
        .rule-tag { font-size: 0.65rem; color: var(--nusuk-green); font-weight: 700; background: #eee5d3; padding: 3px 8px; border-radius: 20px; display: inline-block; margin-bottom: 4px; }
        .rule-text { font-size: 0.75rem; color: #444; display: block; font-weight: 500; }

        .copyright { text-align: center; margin-top: 20px; font-size: 0.7rem; color: #999; font-weight: 500; padding-bottom: 10px; }
        .copyright a { color: #999; text-decoration: none; border-bottom: 1px solid transparent; }
    </style>
</head>
<body>
    <div class="bg-animate" id="bgLayer"></div>
    <div class="container">
        <header>
            <h1 id="appTitle">Kalkulator Zakat</h1>
        </header>

        <div class="form-section">
            <label id="lblLang">1. Pilih Bahasa / Select Language</label>
            <select id="language" onchange="updateUI()">
                <option value="id">Bahasa Indonesia</option>
                <option value="en">English</option>
            </select>
        </div>

        <div class="form-section">
            <label id="lblType">2. Pilih Jenis Zakat</label>
            <select id="zakatType" onchange="toggleInputs()">
                <option value="">-- Pilih Jenis Zakat --</option>
                <option value="fitrah">Zakat Fitrah</option>
                <option value="maal">Zakat Maal (Tabungan/Uang)</option>
                <option value="emas">Zakat Emas & Perak</option>
                <option value="tijarah">Zakat Perdagangan</option>
                <option value="zuru">Zakat Pertanian</option>
                <option value="rikaz">Zakat Rikaz (Temuan 20%)</option>
                <option value="profesi">Zakat Profesi (Gaji)</option>
            </select>
        </div>

        <div id="dynamicInputs" class="form-section" style="display:none;">
            <div id="fitrahFields" style="display:none;">
                <label id="lblPrice">Harga Beras per Kg</label>
                <input type="number" id="ricePrice" placeholder="0">
                <label id="lblSoul" style="margin-top:10px;">Jumlah Orang (Jiwa)</label>
                <input type="number" id="soulCount" placeholder="0">
            </div>
            
            <div id="emasFields" style="display:none;">
                <label id="lblGoldWeight">Total Berat (Gram)</label>
                <input type="number" id="goldWeight" placeholder="0">
                <label id="lblGoldPrice" style="margin-top:10px;">Harga Emas/Perak Saat Ini (per Gram)</label>
                <input type="number" id="goldPrice" placeholder="0">
            </div>

            <div id="otherFields" style="display:none;">
                <label id="lblValue">Total Nilai Harta / Hasil</label>
                <input type="number" id="totalValue" placeholder="0">
            </div>
        </div>

        <button id="btnCalc" onclick="calculateZakat()">Hitung Zakat</button>

        <div id="resultBox" class="result-card">
            <div id="nisabWarn" class="nisab-warning"></div>
            <div id="resTotal" class="total-amount"></div>
            <div id="resArabic" class="arabic"></div>
            <div id="resTrans" class="translation"></div>
            <div id="resSource" class="source-tag"></div>
            
            <div class="rule-box">
                <span id="lblRule" class="rule-tag">Nisab & Haul</span>
                <span id="resRule" class="rule-text"></span>
            </div>
        </div>
        
        <div class="copyright">
            Â© 2026 <a href="https://djebengwibowo.github.io/myblog/#about" target="_blank">Djebeng Wibowo</a>. All Right Reserved.
        </div>
    </div>

<script>
    const zakatData = {
        id: {
            title: "Kalkulator Zakat", btn: "Hitung Zakat", soul: "Jumlah Orang (Jiwa)", price: "Harga Beras per Kg", 
            value: "Total Nilai Harta / Hasil", goldWeight: "Total Berat (Gram)", goldPrice: "Harga Emas Saat Ini (per Gram)", 
            nisabMsg: "Zakat Belum Wajib (Nisab 85g belum tercapai)",
            curr: "IDR", locale: "id-ID", ruleLabel: "Nisab & Haul",
            fitrah: { tr: "Rasulullah ï·º mewajibkan zakat fitrah sebanyak satu sha' kurma atau satu sha' gandum atas hamba sahaya, orang merdeka, laki-laki, perempuan, kecil maupun besar dari kalangan kaum Muslimin.", src: "HR. BUKHARI NO. 1503 & MUSLIM NO. 984", rule: "Nisab: Per Jiwa | Haul: Ramadhan (Sebelum Idul Fitri)" },
            maal: { tr: "Ambillah zakat dari harta mereka guna membersihkan dan mensucikan mereka, dan berdoalah untuk mereka.", src: "QS. AT-TAWBAH: 103", rule: "Nisab: 85g Emas | Haul: 1 Tahun" },
            emas: { tr: "Dan orang-orang yang menyimpan emas dan perak dan tidak menginfakkannya di jalan Allah, maka berikanlah kabar gembira kepada mereka bahwa mereka akan mendapat azab yang pedih.", src: "QS. AT-TAWBAH: 34", rule: "Nisab: 85g Emas / 595g Perak | Haul: 1 Tahun" },
            tijarah: { tr: "Wahai orang-orang yang beriman! Nafkahkanlah sebagian dari hasil usahamu yang baik-baik.", src: "QS. AL-BAQARAH: 267", rule: "Nisab: 85g Emas | Haul: 1 Tahun" },
            zuru: { tr: "Makanlah buahnya apabila ia berbuah dan tunaikanlah haknya (zakatnya) pada hari memetik hasilnya.", src: "QS. AL-AN'AM: 141", rule: "Nisab: 653 Kg Gabah | Haul: Setiap Panen" },
            rikaz: { tr: "Rasulullah ï·º bersabda: '...Dan pada rikaz (harta karun temuan) wajib dizakatkan seperlimanya (20%).'", src: "HR. BUKHARI NO. 1499", rule: "Nisab: Tidak Ada | Haul: Langsung" },
            profesi: { tr: "Wahai orang-orang yang beriman! Infakkanlah sebagian dari hasil usahamu yang baik-baik.", src: "QS. AL-BAQARAH: 267", rule: "Nisab: Setara 520kg Beras (MUI) | Haul: Setiap Pendapatan" }
        },
        en: {
            title: "Zakat Calculator", btn: "Calculate Zakat", soul: "Number of People", price: "Rice Price per Kg", 
            value: "Total Wealth Value", goldWeight: "Total Weight (Grams)", goldPrice: "Gold Price (per Gram)", 
            nisabMsg: "Zakat Not Required (Nisab 85g not reached)",
            curr: "USD", locale: "en-US", ruleLabel: "Nisab & Haul",
            fitrah: { tr: "Allah's Messenger ï·º enjoined the payment of one Sha' of dates or barley as Zakat-ul-Fitr on every Muslim.", src: "SAHIH BUKHARI", rule: "Nisab: Per Person | Haul: Before Eid" },
            emas: { tr: "And those who hoard gold and silver and spend it not in the way of Allah - give them tidings of a painful punishment.", src: "QS. AT-TAWBAH: 34", rule: "Nisab: 85g Gold | Haul: 1 Year" }
        }
    };

    const arabicTexts = {
        fitrah: "ÙÙØ±ÙØ¶Ù Ø±ÙØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ï·º Ø²ÙÙƒÙØ§Ø©Ù Ø§Ù„Ù’ÙÙØ·Ù’Ø±Ù ØµÙØ§Ø¹Ù‹Ø§ Ù…ÙÙ†Ù’ ØªÙÙ…Ù’Ø±Ù Ø£ÙÙˆÙ’ ØµÙØ§Ø¹Ù‹Ø§ Ù…ÙÙ†Ù’ Ø´ÙØ¹ÙÙŠØ±Ù...",
        maal: "Ø®ÙØ°Ù’ Ù…ÙÙ†Ù’ Ø£ÙÙ…Ù’ÙˆÙØ§Ù„ÙÙ‡ÙÙ…Ù’ ØµÙØ¯ÙÙ‚ÙØ©Ù‹ ØªÙØ·ÙÙ‡ÙÙ‘Ø±ÙÙ‡ÙÙ…Ù’ ÙˆÙØªÙØ²ÙÙƒÙÙ‘ÙŠÙ‡ÙÙ…Ù’ Ø¨ÙÙ‡ÙØ§...",
        emas: "ÙˆÙØ§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù ÙŠÙÙƒÙ’Ù†ÙØ²ÙÙˆÙ†Ù Ø§Ù„Ø°ÙÙ‘Ù‡ÙØ¨Ù ÙˆÙØ§Ù„Ù’ÙÙØ¶ÙÙ‘Ø©Ù ÙˆÙÙ„ÙØ§ ÙŠÙÙ†Ù’ÙÙÙ‚ÙÙˆÙ†ÙÙ‡ÙØ§ ÙÙÙŠ Ø³ÙØ¨ÙÙŠÙ„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù...",
        tijarah: "ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ Ø£ÙÙ†Ù’ÙÙÙ‚ÙÙˆØ§ Ù…ÙÙ†Ù’ Ø·ÙÙŠÙÙ‘Ø¨ÙØ§ØªÙ Ù…ÙØ§ ÙƒÙØ³ÙØ¨Ù’ØªÙÙ…Ù’...",
        zuru: "ÙƒÙÙ„ÙÙˆØ§ Ù…ÙÙ†Ù’ Ø«ÙÙ…ÙØ±ÙÙ‡Ù Ø¥ÙØ°ÙØ§ Ø£ÙØ«Ù’Ù…ÙØ±Ù ÙˆÙØ¢ØªÙÙˆØ§ Ø­ÙÙ‚ÙÙ‘Ù‡Ù ÙŠÙÙˆÙ’Ù…Ù Ø­ÙØµÙØ§Ø¯ÙÙ‡Ù",
        rikaz: "ÙˆÙÙÙÙŠ Ø§Ù„Ø±ÙÙ‘ÙƒÙØ§Ø²Ù Ø§Ù„Ù’Ø®ÙÙ…ÙØ³Ù",
        profesi: "ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ Ø£ÙÙ†Ù’ÙÙÙ‚ÙÙˆØ§ Ù…ÙÙ†Ù’ Ø·ÙÙŠÙÙ‘Ø¨ÙØ§ØªÙ Ù…ÙØ§ ÙƒÙØ³ÙØ¨Ù’ØªÙÙ…Ù’"
    };

    function updateUI() {
        const l = document.getElementById('language').value;
        const d = zakatData[l] || zakatData['id'];
        document.getElementById('appTitle').innerText = d.title;
        document.getElementById('btnCalc').innerText = d.btn;
        document.getElementById('lblPrice').innerText = d.price;
        document.getElementById('lblSoul').innerText = d.soul;
        document.getElementById('lblValue').innerText = d.value;
        document.getElementById('lblGoldWeight').innerText = d.goldWeight;
        document.getElementById('lblGoldPrice').innerText = d.goldPrice;
        document.getElementById('lblRule').innerText = d.ruleLabel;
        document.getElementById('resultBox').style.display = 'none';
    }

    function toggleInputs() {
        const type = document.getElementById('zakatType').value;
        document.getElementById('dynamicInputs').style.display = type ? 'block' : 'none';
        document.getElementById('fitrahFields').style.display = type === 'fitrah' ? 'block' : 'none';
        document.getElementById('emasFields').style.display = type === 'emas' ? 'block' : 'none';
        document.getElementById('otherFields').style.display = (type !== 'fitrah' && type !== 'emas' && type !== '') ? 'block' : 'none';
    }

    function calculateZakat() {
        const lang = document.getElementById('language').value;
        const type = document.getElementById('zakatType').value;
        if (!type) return;

        const d = zakatData[lang] || zakatData['id'];
        let total = 0;
        let nisabReached = true;

        if (type === 'fitrah') {
            const price = parseFloat(document.getElementById('ricePrice').value) || 0;
            const souls = parseFloat(document.getElementById('soulCount').value) || 0;
            total = 2.5 * price * souls; 
        } else if (type === 'emas') {
            const weight = parseFloat(document.getElementById('goldWeight').value) || 0;
            const price = parseFloat(document.getElementById('goldPrice').value) || 0;
            
            if (weight < 85) {
                nisabReached = false;
                total = 0;
            } else {
                total = (weight * price) * 0.025;
            }
        } else {
            const val = parseFloat(document.getElementById('totalValue').value) || 0;
            const rates = { maal: 0.025, tijarah: 0.025, zuru: 0.05, rikaz: 0.20, profesi: 0.025 };
            total = val * (rates[type] || 0.025);
        }

        const formatter = new Intl.NumberFormat(d.locale, { style: 'currency', currency: d.curr, maximumFractionDigits: 0 });
        document.getElementById('resTotal').innerText = formatter.format(total);
        
        // Menampilkan pesan Nisab jika belum tercapai
        const nisabWarn = document.getElementById('nisabWarn');
        if (!nisabReached) {
            nisabWarn.innerText = d.nisabMsg;
            nisabWarn.style.display = 'block';
        } else {
            nisabWarn.style.display = 'none';
        }

        const content = d[type] || zakatData['id'][type];
        document.getElementById('resArabic').innerText = arabicTexts[type] || "";
        document.getElementById('resTrans').innerText = content ? `"${content.tr}"` : "";
        document.getElementById('resSource').innerText = content ? content.src : "";
        document.getElementById('resRule').innerText = content ? content.rule : "";
        document.getElementById('resultBox').style.display = 'block';
        
        document.getElementById('resultBox').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    const bg = document.getElementById('bgLayer');
    const icons = ['â­', 'âœ¨', 'ğŸŒ™', 'ğŸŒ¿'];
    for(let i=0; i<12; i++) {
        let span = document.createElement('span'); 
        span.className = 'floating-icon';
        span.innerText = icons[Math.floor(Math.random()*icons.length)];
        span.style.left = Math.random() * 100 + 'vw';
        span.style.animationDelay = Math.random() * 5 + 's';
        bg.appendChild(span);
    }
</script>
</body>
</html>
